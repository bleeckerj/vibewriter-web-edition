<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Login with FirebaseUI - Vibewriter</title>
    <meta name="description" content="Login to Vibewriter using FirebaseUI." />
    <link rel="stylesheet" href="style.css" id="style-sheet" />
    <link rel="stylesheet" href="tailwind-build.css" />
    <link type="text/css" rel="stylesheet" href="https://cdn.firebase.com/libs/firebaseui/6.0.0/firebaseui.css" />
</head>
<body class="bg-gradient-to-br from-gray-900 via-indigo-900 to-blue-900 min-h-screen flex flex-col">
    <header class="w-full py-6 px-4 flex flex-col md:flex-row justify-between items-center gap-4 md:gap-0">
        <div class="flex items-center space-x-3">
            <span class="text-[1.1em] sm:text-2xl font-bold text-white tracking-tight">Vibewriter</span>
        </div>
        <nav class="space-x-4 text-center">
            <a href="/about.html" class="sm:text-[1em] text-indigo-200 hover:text-white transition">About</a>
            <a href="index.html" class="sm:text-[1em] text-indigo-200 hover:text-white transition">Home</a>
        </nav>
    </header>
    <main class="flex-1 flex flex-col justify-center items-center text-center px-4">
        <div class="bg-white/10 backdrop-blur-md rounded-lg shadow-lg p-8 max-w-md w-full">
            <h1 class="text-3xl font-extrabold text-white mb-6">Sign in to Vibewriter</h1>
            <div id="firebaseui-auth-container"></div>
            <div id="user-info" class="hidden mt-6">
                <p class="text-white mb-2">Signed in as <span id="user-email"></span></p>
                <button id="logout-btn" class="bg-indigo-600 hover:bg-indigo-700 text-white font-semibold px-4 py-2 rounded shadow transition">Log Out</button>
                <a id="start-vibewriting-btn" href="/editor.html" class="inline-block mt-4 bg-green-600 hover:bg-green-700 text-white font-semibold px-4 py-2 rounded shadow transition">Start Vibewriting</a>
            </div>
        </div>
    </main>
    <footer class="mt-10 w-full py-6 text-center text-indigo-200 text-sm">
        &copy; 2025 Near Future Laboratory. All rights reserved.
        <a href='https://nearfuturelaboratory.com/'><img src="/images/site/LaboratoryGuy_01__CIRCLE_80x80.webp" alt="Vibewriter Logo" style="margin: 16px auto; width: 60px;" class="mx-auto w-[60px] mt-4 shadow-lg"></a>
        <a href="/privacy" class="sm:text-[1em] text-indigo-200 hover:text-white transition">Privacy Policy</a>
    </footer>
    
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/ui/6.0.1/firebase-ui-auth.js"></script>
    <link type="text/css" rel="stylesheet" href="https://www.gstatic.com/firebasejs/ui/6.0.1/firebase-ui-auth.css" />
    <script>
        // Your Firebase config - replace with your own
        const firebaseConfig = {
            apiKey: "AIzaSyCqzPOxVQeA0k7qkO9q5V7t0EY4ad-K5ls",
            authDomain: "vibewriter-bb628.firebaseapp.com",
            projectId: "vibewriter-bb628",
            storageBucket: "vibewriter-bb628.firebasestorage.app",
            messagingSenderId: "387555975528",
            appId: "1:387555975528:web:409c2fb787ae29e2bbf6dd"
        };
        
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        
        const auth = firebase.auth();
        
        // Initialize the FirebaseUI Widget using Firebase.
        const ui = new firebaseui.auth.AuthUI(auth);
        
        const uiConfig = {
            callbacks: {
                signInSuccessWithAuthResult: function(authResult, redirectUrl) {
                    // User successfully signed in.
                    document.getElementById('user-info').classList.remove('hidden');
                    document.getElementById('user-email').textContent = authResult.user.email;
                    // Prevent redirect.
                    return false;
                },
                uiShown: function() {
                    // The widget is rendered.
                    document.getElementById('firebaseui-auth-container').style.display = 'block';
                }
            },
            signInFlow: 'popup',
            signInOptions: [
            firebase.auth.GoogleAuthProvider.PROVIDER_ID,
            firebase.auth.GithubAuthProvider.PROVIDER_ID,
            firebase.auth.EmailAuthProvider.PROVIDER_ID,
            ],
            tosUrl: '#',
            privacyPolicyUrl: 'privacy.html'
        };
        
        ui.start('#firebaseui-auth-container', uiConfig);
        
        // Logout button
        document.getElementById('logout-btn').addEventListener('click', () => {
            auth.signOut().then(() => {
                document.getElementById('user-info').classList.add('hidden');
                document.getElementById('user-email').textContent = '';
            });
        });
    </script>
</body>
</html>
